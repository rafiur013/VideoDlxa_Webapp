<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoDlx - Free Video Downloader</title>
    
    <!-- Monetag Ads - Zone ID: 10599581 -->
    <script async src="//thubanoa.com/400/10599581" data-cfasync="false"></script>
    
    <!-- Banner Ad -->
    <script type="text/javascript">
	atOptions = {
		'key' : '10599581',
		'format' : 'iframe',
		'height' : 250,
		'width' : 300,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.topcreativeformat.com/10599581/invoke.js"></script>
    
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif}
        body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
        .container{max-width:500px;margin:0 auto}
        .header{text-align:center;color:#fff;padding:30px 20px 20px;margin-bottom:25px}
        .header h1{font-size:36px;margin-bottom:12px;text-shadow:2px 2px 8px rgba(0,0,0,.3);font-weight:800}
        .header p{font-size:17px;opacity:.95;font-weight:500}
        .ad-zone{background:rgba(255,255,255,.95);border-radius:16px;padding:18px;margin-bottom:22px;min-height:110px;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 20px rgba(0,0,0,.15)}
        .main-card{background:#fff;border-radius:24px;padding:35px 28px;box-shadow:0 12px 48px rgba(0,0,0,.25);margin-bottom:22px}
        .input-label{font-size:20px;font-weight:800;color:#1f2937;margin-bottom:18px;text-align:center;display:block}
        .link-input{width:100%;padding:20px 18px;border:3px solid #e5e7eb;border-radius:16px;font-size:16px;margin-bottom:16px;transition:all .3s;font-weight:500}
        .link-input:focus{outline:0;border-color:#667eea;box-shadow:0 0 0 5px rgba(102,126,234,.15)}
        .btn{width:100%;padding:20px;border:none;border-radius:16px;font-size:17px;font-weight:800;cursor:pointer;transition:all .3s;margin-bottom:14px}
        .btn-paste{background:#f3f4f6;color:#1f2937;border:2px solid #e5e7eb}
        .btn-paste:hover{background:#e5e7eb;transform:translateY(-2px)}
        .btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 6px 20px rgba(102,126,234,.4)}
        .btn-primary:hover{transform:translateY(-3px)}
        .btn:disabled{opacity:.5;cursor:not-allowed}
        .video-card{display:none;background:#fff;border-radius:24px;padding:24px;margin-bottom:22px;box-shadow:0 12px 48px rgba(0,0,0,.25)}
        .video-card.show{display:block;animation:slideIn .4s ease}
        @keyframes slideIn{from{opacity:0;transform:translateY(-15px)}to{opacity:1;transform:translateY(0)}}
        .video-thumb{width:100%;height:220px;object-fit:cover;border-radius:16px;margin-bottom:18px}
        .video-title{font-size:18px;font-weight:700;margin-bottom:12px;color:#1f2937}
        .video-meta{font-size:15px;color:#6b7280;font-weight:600}
        .quality-card{display:none;background:#fff;border-radius:24px;padding:30px 25px;margin-bottom:22px;box-shadow:0 12px 48px rgba(0,0,0,.25)}
        .quality-card.show{display:block}
        .quality-title{font-size:20px;font-weight:800;text-align:center;margin-bottom:25px;color:#1f2937}
        .quality-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:18px}
        .quality-btn{background:#f9fafb;border:3px solid #e5e7eb;padding:22px 12px;border-radius:16px;cursor:pointer;text-align:center;transition:all .25s}
        .quality-btn:hover{border-color:#667eea;background:#fff;transform:translateY(-4px)}
        .quality-text{font-size:19px;font-weight:800;margin-bottom:6px}
        .quality-size{font-size:13px;color:#6b7280;font-weight:600}
        .audio-btn{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);color:#fff;padding:20px;border-radius:16px;text-align:center;cursor:pointer;font-weight:800;font-size:17px;box-shadow:0 6px 20px rgba(245,158,11,.4)}
        .audio-btn:hover{transform:translateY(-4px)}
        .loading{opacity:.6;pointer-events:none}
        .toast{position:fixed;bottom:35px;left:50%;transform:translateX(-50%) translateY(120px);background:#1f2937;color:#fff;padding:18px 32px;border-radius:14px;box-shadow:0 12px 48px rgba(0,0,0,.4);transition:transform .4s;z-index:10000;font-weight:700}
        .toast.show{transform:translateX(-50%) translateY(0)}
        .toast.success{background:#10b981}
        .toast.error{background:#ef4444}
        .features{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:22px}
        .feature{background:#fff;border-radius:18px;padding:24px 18px;text-align:center;box-shadow:0 6px 20px rgba(0,0,0,.15)}
        .feature-icon{font-size:42px;margin-bottom:10px}
        .feature-text{font-size:15px;font-weight:700;color:#1f2937}
        @media (max-width:480px){.header h1{font-size:30px}.quality-grid,.features{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <div class="header">
        <h1>üé¨ VideoDlx</h1>
        <p>Download from YouTube, Facebook, Instagram & More</p>
    </div>
    <div class="container">
        <!-- Ad Zone 1 - Monetag Banner -->
        <div class="ad-zone">
            <div id="container-10599581"></div>
        </div>
        
        <div class="main-card">
            <label class="input-label">üìé Paste Video Link</label>
            <input type="text" id="videoLink" class="link-input" placeholder="https://youtube.com/watch?v=...">
            <button class="btn btn-paste" onclick="pasteLink()">üìã Paste</button>
            <button class="btn btn-primary" id="fetchBtn" onclick="getVideo()">üöÄ Get Download Options</button>
        </div>
        
        <!-- Ad Zone 2 -->
        <div class="ad-zone">
            <div id="container-10599581-2"></div>
        </div>
        
        <div class="video-card" id="videoCard">
            <img id="videoThumb" class="video-thumb" src="" alt="">
            <div class="video-title" id="videoTitle"></div>
            <div class="video-meta" id="videoMeta"></div>
        </div>
        
        <div class="quality-card" id="qualityCard">
            <div class="quality-title">üìπ Select Quality</div>
            <div class="quality-grid" id="qualityGrid"></div>
            <div class="audio-btn" onclick="downloadAudio()">üéµ Download Audio</div>
        </div>
        
        <div class="features">
            <div class="feature"><div class="feature-icon">‚ö°</div><div class="feature-text">Fast</div></div>
            <div class="feature"><div class="feature-icon">üéØ</div><div class="feature-text">HD Quality</div></div>
            <div class="feature"><div class="feature-icon">üéµ</div><div class="feature-text">MP3</div></div>
            <div class="feature"><div class="feature-icon">üåê</div><div class="feature-text">1000+ Sites</div></div>
        </div>
        
        <!-- Ad Zone 3 - Footer -->
        <div class="ad-zone">
            <div id="container-10599581-3"></div>
        </div>
    </div>
    <div class="toast" id="toast"></div>
    
    <script>
        // Multiple working APIs
        const APIS = [
            'https://api.cobalt.tools/api/json',
            'https://co.wuk.sh/api/json',
            'https://api.downloadvideo.net/v1/info'
        ];
        
        let currentVideo = null;
        let dlCount = 0;
        let currentApiIndex = 0;

        async function pasteLink() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('videoLink').value = text;
                showToast('‚úÖ Link pasted!', 'success');
            } catch {
                showToast('üìã Please paste manually', 'error');
            }
        }

        async function getVideo() {
            const url = document.getElementById('videoLink').value.trim();
            
            if (!url) {
                showToast('‚ùå Please enter a video link', 'error');
                return;
            }

            if (!isValidUrl(url)) {
                showToast('‚ùå Invalid URL format', 'error');
                return;
            }

            const btn = document.getElementById('fetchBtn');
            btn.classList.add('loading');
            btn.disabled = true;
            btn.textContent = '‚è≥ Loading...';

            // Try multiple APIs
            for (let i = 0; i < APIS.length; i++) {
                try {
                    const api = APIS[i];
                    console.log('Trying API:', api);
                    
                    const response = await fetch(api, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            url: url,
                            vCodec: 'h264',
                            vQuality: '1080',
                            aFormat: 'mp3',
                            isAudioOnly: false,
                            filenamePattern: 'basic'
                        })
                    });

                    if (!response.ok) {
                        console.log('API failed:', api, response.status);
                        continue;
                    }

                    const data = await response.json();
                    console.log('API Response:', data);
                    
                    if (data.status === 'error' || data.error) {
                        console.log('API returned error:', data);
                        continue;
                    }

                    // Success!
                    currentVideo = {
                        url: url,
                        title: data.text || data.title || extractTitle(url),
                        thumb: data.thumb || data.thumbnail || 'https://via.placeholder.com/400x200?text=Video',
                        downloadUrl: data.url || null
                    };

                    document.getElementById('videoThumb').src = currentVideo.thumb;
                    document.getElementById('videoTitle').textContent = currentVideo.title;
                    document.getElementById('videoMeta').textContent = 'üåê ' + getSource(url);
                    document.getElementById('videoCard').classList.add('show');

                    showQualityOptions();
                    showToast('‚úÖ Video found!', 'success');
                    
                    btn.classList.remove('loading');
                    btn.disabled = false;
                    btn.textContent = 'üöÄ Get Download Options';
                    return;

                } catch (error) {
                    console.log('Error with API:', APIS[i], error);
                    continue;
                }
            }

            // All APIs failed
            showToast('‚ùå Failed to fetch video. Try another link.', 'error');
            btn.classList.remove('loading');
            btn.disabled = false;
            btn.textContent = 'üöÄ Get Download Options';
        }

        function showQualityOptions() {
            const grid = document.getElementById('qualityGrid');
            grid.innerHTML = '';

            const qualities = [
                { q: '1080p', s: '~150 MB' },
                { q: '720p', s: '~80 MB' },
                { q: '480p', s: '~45 MB' },
                { q: '360p', s: '~25 MB' }
            ];

            qualities.forEach(item => {
                const btn = document.createElement('div');
                btn.className = 'quality-btn';
                btn.innerHTML = `<div class="quality-text">üìπ ${item.q}</div><div class="quality-size">${item.s}</div>`;
                btn.onclick = () => downloadVideo(item.q);
                grid.appendChild(btn);
            });

            document.getElementById('qualityCard').classList.add('show');
            document.getElementById('qualityCard').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
        }

        async function downloadVideo(quality) {
            triggerMonetag(); // Show ad
            
            showToast(`‚¨áÔ∏è Downloading ${quality}...`, 'success');

            try {
                // Try to download using stored URL first
                if (currentVideo.downloadUrl) {
                    window.open(currentVideo.downloadUrl, '_blank');
                    showToast('‚úÖ Download started!', 'success');
                    dlCount++;
                    return;
                }

                // Otherwise make API call
                for (let api of APIS) {
                    try {
                        const response = await fetch(api, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                url: currentVideo.url,
                                vQuality: quality.replace('p', ''),
                                vCodec: 'h264',
                                isAudioOnly: false
                            })
                        });

                        const data = await response.json();
                        
                        if (data.url) {
                            window.open(data.url, '_blank');
                            showToast('‚úÖ Download started!', 'success');
                            dlCount++;
                            return;
                        }
                    } catch (error) {
                        continue;
                    }
                }

                throw new Error('All download attempts failed');

            } catch (error) {
                showToast('‚ùå Download failed. Try another quality.', 'error');
            }
        }

        async function downloadAudio() {
            triggerMonetag(); // Show ad
            
            showToast('üéµ Downloading audio...', 'success');

            try {
                for (let api of APIS) {
                    try {
                        const response = await fetch(api, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                url: currentVideo.url,
                                isAudioOnly: true,
                                aFormat: 'mp3'
                            })
                        });

                        const data = await response.json();
                        
                        if (data.url) {
                            window.open(data.url, '_blank');
                            showToast('‚úÖ Audio download started!', 'success');
                            dlCount++;
                            return;
                        }
                    } catch (error) {
                        continue;
                    }
                }

                throw new Error('Audio download failed');

            } catch (error) {
                showToast('‚ùå Audio download failed. Try again.', 'error');
            }
        }

        function triggerMonetag() {
            console.log('üéØ Monetag Ad Triggered - Download #' + dlCount);
            // Monetag pop-under will trigger automatically
            dlCount++;
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch {
                return false;
            }
        }

        function extractTitle(url) {
            try {
                return new URL(url).hostname.replace('www.', '') + ' Video';
            } catch {
                return 'Video';
            }
        }

        function getSource(url) {
            try {
                const host = new URL(url).hostname.replace('www.', '');
                if (host.includes('youtube')) return 'YouTube';
                if (host.includes('facebook')) return 'Facebook';
                if (host.includes('instagram')) return 'Instagram';
                if (host.includes('tiktok')) return 'TikTok';
                if (host.includes('twitter') || host.includes('x.com')) return 'Twitter';
                return host.split('.')[0].toUpperCase();
            } catch {
                return 'Unknown';
            }
        }

        function showToast(msg, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = `toast ${type} show`;
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Log for debugging
        console.log('‚úÖ VideoDlx Loaded - Zone ID: 10599581');
        console.log('üìä Monetag should show ads automatically');
    </script>
</body>
</html>
